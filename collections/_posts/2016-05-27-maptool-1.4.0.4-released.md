---
layout: post
title: MapTool 1.4.0.4 Released
tags: release
author: bard
icon: /assets/img/logos/RPTools_Map_Logo_512.png
---

<img class="float-right" src="/assets/img/SwatBug.webp" alt="SwatBug">

Time for another build with bug fixes and some features

**Fixes and New Features**
- Fix for math.cos(), math.sin(), math.tan(), math.acos(), math.asin(), math.atan() macro functions (Craig).
- Added json.rolls() macro function (Craig).
- Added json.objrolls() macro function (Craig).
- Overdue update to the credits file (Craig).

**Build Related**
- Continuous Integration using Travis CI (joshsziegler)

**New JSON functions**

Two new functions are useful for generating multiple rolls for characters and npcs. In both cases these are simple roll expressions not macros.

**json.rolls**<br>
This function takes 2 or 3 parameters and returns a json array<br>
json.rolls(roll, dim1, dim2) => returns a json array with the rolls performed<br>
e.g.<br>
{json.rolls(“3d6”, 6),2} => [ 11, 7, 15, 8, 10, 13 ]

The three parameter version returns a two dimensional array<br>
e.g.<br>
{json.rolls(“3d6”, 6, 4),2} => [ [ 11, 13, 11, 13 ], [ 8, 11, 17, 10 ], [ 8, 11, 14, 11 ], [ 6, 8, 13, 6 ], [ 6, 11, 8, 10 ], [ 10, 7, 17, 11 ] ]

**json.objrolls**<br>
Is similar to json.rolls() but returns a json object.<br>
It takes 3 parameters<br>
json.objrolls(names, stat, rolls)<br>
This will generate rolls for all the stat for each “name”. rolls is either a single string with a roll expression in which case every stat will use same roll expression, or a json array with a roll expression for each stat (so must be same size as stat).<br>
e.g.<br>
&lt;pre&gt;{json.indent(json.objrolls(“[‘henchman1’, ‘henchman2’, ‘henchman3’]”, “[‘Str’, ‘Dex’, ‘Con’, ‘Int’, ‘Wis’, ‘Chr’]”, “3d6”),2)}&lt;/pre&gt;

> {<br>
“henchman1”:   {<br>
“Str”: 10,<br>
“Dex”: 12,<br>
“Con”: 10,<br>
“Int”: 10,<br>
“Wis”: 8,<br>
“Chr”: 12<br>
},<br>
“henchman2”:   {<br>
“Str”: 11,<br>
“Dex”: 10,<br>
“Con”: 7,<br>
“Int”: 13,<br>
“Wis”: 9,<br>
“Chr”: 7<br>
},<br>
“henchman3”:   {<br>
“Str”: 10,<br>
“Dex”: 10,<br>
“Con”: 10,<br>
“Int”: 12,<br>
“Wis”: 15,<br>
“Chr”: 13<br>
}<br>
}

&lt;pre&gt;{json.indent(json.objrolls(“[‘henchman1’, ‘henchman2’, ‘henchman3’]”, “[‘Str’, ‘Dex’, ‘Con’, ‘Int’, ‘Wis’, ‘Chr’]”, “[‘3d6+1’, ‘3d6’, ‘3d6’, ‘3d6-2’, ‘3d6’, ‘2d6’]”),2)}&gt;/pre&gt;

> {<br>
“henchman1”:   {<br>
“Str”: 11,<br>
“Dex”: 12,<br>
“Con”: 13,<br>
“Int”: 8,<br>
“Wis”: 10,<br>
“Chr”: 11<br>
},<br>
“henchman2”:   {<br>
“Str”: 12,<br>
“Dex”: 11,<br>
“Con”: 12,<br>
“Int”: 8,<br>
“Wis”: 12,<br>
“Chr”: 3<br>
},<br>
“henchman3”:   {<br>
“Str”: 12,<br>
“Dex”: 13,<br>
“Con”: 9,<br>
“Int”: 8,<br>
“Wis”: 13,<br>
“Chr”: 7<br>
}<br>
}

Next up, Development build 1.4.1.0 with loads of new functionality and features – now with Nerps!!!
